@import "tailwindcss";
@plugin "@tailwindcss/typography";

/* Tailwind v4 requires a custom variant for class-based dark mode */
@custom-variant dark (&:where(.dark, .dark *));

:root {
  --color-primary: #2c3e50;
  /* Body text: Deep gray-blue */
  --color-secondary: #6b7280;
  /* Secondary text */
  --color-main: #ffffff;
  /* Background: White */
  --color-surface: #ffffff;
  --color-muted: #f9fafb;
  --color-border-subtle: #e5e7eb;
  --color-accent: #047857;
  --color-heading: #1a1a1a;
  /* Headings: Near black */

  /* Typography Sizing & Metrics (Golden Standard) */
  --font-size-reading: 16px;
  --line-height-reading: 1.75;
  --font-stack-sans: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei", sans-serif;
  --font-stack-mono: "JetBrains Mono", "Fira Code", Menlo, monospace;
}

.dark {
  --color-primary: #f5f5f4;
  --color-secondary: #a8a29e;
  --color-main: #0c0a09;
  --color-surface: #1c1917;
  --color-muted: #292524;
  --color-border-subtle: #292524;
  --color-accent: #10b981;
  --color-heading: #f5f5f4;
}

@theme {
  --color-primary: var(--color-primary);
  --color-secondary: var(--color-secondary);
  --color-main: var(--color-main);
  --color-surface: var(--color-surface);
  --color-muted: var(--color-muted);
  --color-border-subtle: var(--color-border-subtle);
  --color-accent: var(--color-accent);
  --color-heading: var(--color-heading);
}

/* Custom Reading Experience Styles - Golden Standard Implementation */
.prose-reading {
  max-width: 70ch !important;
  font-family: var(--font-stack-sans) !important;
  font-size: var(--font-size-reading) !important;
  line-height: var(--line-height-reading) !important;
  color: var(--color-primary) !important;
  text-align: left !important;
}

/* Base elements inside prose-reading to override Tailwind Typography */
.prose-reading :where(p, li, blockquote) {
  font-size: 1rem !important;
  line-height: 1.75 !important;
  margin-bottom: 1.5em !important;
  color: var(--color-primary) !important;
}

/* Visual Hierarchy: Headings */
.prose-reading :where(h1, h2, h3, h4) {
  color: var(--color-heading) !important;
  font-family: var(--font-stack-sans) !important;
  font-weight: 700 !important;
  line-height: 1.3 !important;
}

.prose-reading :where(h1) {
  font-size: 2.25em !important;
  margin-bottom: 1em !important;
  margin-top: 0 !important;
}

.prose-reading :where(h2) {
  font-size: 1.75em !important;
  margin-top: 1.5em !important;
  margin-bottom: 0.8em !important;
}

.prose-reading :where(h3) {
  font-size: 1.35em !important;
  margin-top: 1.5em !important;
  margin-bottom: 0.6em !important;
}

/* Blockquote: Specialist Style */
.prose-reading :where(blockquote) {
  font-style: italic !important;
  border-left: 4px solid var(--color-border-subtle) !important;
  padding-left: 1.5rem !important;
  margin: 2em 0 !important;
  color: var(--color-secondary) !important;
  background: transparent !important;
}

/* Code Blocks: Minimalist & Clear */
.prose-reading :where(pre) {
  background-color: var(--color-muted) !important;
  border-radius: 6px !important;
  padding: 1rem !important;
  margin: 1.5em 0 !important;
  border: 1px solid var(--color-border-subtle) !important;
}

.prose-reading :where(code) {
  font-family: var(--font-stack-mono) !important;
  font-size: 0.9em !important;
  color: inherit !important;
  background: transparent !important;
  padding: 0 !important;
}

/* Inline code specifically */
.prose-reading :not(pre)> :where(code) {
  background-color: var(--color-muted) !important;
  padding: 0.2em 0.4em !important;
  border-radius: 4px !important;
}

/* CJK Support: Pangu's White feel & Punctuation */
[lang="zh"] .prose-reading {
  word-break: break-all;
  text-wrap: pretty;
  letter-spacing: 0.01em;
  /* Subtle spacing for better CJK/Latin mix */
}

/* List spacing */
.prose-reading :where(ul, ol) {
  padding-left: 1.5em !important;
  margin-bottom: 1.5em !important;
}

.prose-reading :where(li) {
  margin-bottom: 0.5em !important;
}

/* Images and Media: Gentle presence */
.prose-reading :where(img) {
  border-radius: 6px !important;
  margin: 2.5em auto !important;
  box-shadow: none !important;
}